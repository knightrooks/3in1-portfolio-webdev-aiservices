{% extends "base.html" %}

{% block title %}Privacy Policy - AI Portfolio Platform{% endblock %}

{% block content %}
<div class="privacy-page">
    <!-- Hero Section -->
    <section class="hero-section bg-gradient-to-r from-green-600 to-blue-600 text-white py-20">
        <div class="container mx-auto px-4 text-center">
            <h1 class="text-4xl md:text-5xl font-bold mb-4">Privacy Policy</h1>
            <p class="text-xl opacity-90 max-w-2xl mx-auto">
                We are committed to protecting your privacy and ensuring the security of your personal information
            </p>
            <div class="mt-6 text-sm opacity-80">
                <p>Last updated: {{ last_updated or "January 1, 2024" }}</p>
                <p>Effective date: {{ effective_date or "January 1, 2024" }}</p>
            </div>
        </div>
    </section>

    <!-- Privacy Content -->
    <div class="container mx-auto px-4 py-16 max-w-4xl">
        <div class="prose lg:prose-lg mx-auto">
            
            <!-- Quick Summary -->
            <div class="bg-green-50 border-l-4 border-green-500 p-6 mb-8">
                <h2 class="text-xl font-bold mb-3 text-green-800">Privacy at a Glance</h2>
                <ul class="space-y-2 text-green-700">
                    <li>✓ We collect only necessary information to provide our services</li>
                    <li>✓ Your AI conversations are encrypted and securely stored</li>
                    <li>✓ We never sell your personal data to third parties</li>
                    <li>✓ You have full control over your data and can delete it anytime</li>
                    <li>✓ We comply with GDPR, CCPA, and other privacy regulations</li>
                </ul>
            </div>

            <!-- Table of Contents -->
            <div class="bg-gray-50 p-6 rounded-lg mb-8">
                <h2 class="text-xl font-bold mb-4 text-gray-800">Table of Contents</h2>
                <ul class="space-y-2 text-sm">
                    <li><a href="#information-we-collect" class="text-blue-600 hover:underline">1. Information We Collect</a></li>
                    <li><a href="#how-we-use" class="text-blue-600 hover:underline">2. How We Use Your Information</a></li>
                    <li><a href="#ai-data" class="text-blue-600 hover:underline">3. AI Conversation Data</a></li>
                    <li><a href="#sharing" class="text-blue-600 hover:underline">4. Information Sharing</a></li>
                    <li><a href="#data-security" class="text-blue-600 hover:underline">5. Data Security</a></li>
                    <li><a href="#retention" class="text-blue-600 hover:underline">6. Data Retention</a></li>
                    <li><a href="#your-rights" class="text-blue-600 hover:underline">7. Your Privacy Rights</a></li>
                    <li><a href="#cookies" class="text-blue-600 hover:underline">8. Cookies and Tracking</a></li>
                    <li><a href="#international" class="text-blue-600 hover:underline">9. International Data Transfers</a></li>
                    <li><a href="#children" class="text-blue-600 hover:underline">10. Children's Privacy</a></li>
                    <li><a href="#changes" class="text-blue-600 hover:underline">11. Policy Changes</a></li>
                    <li><a href="#contact" class="text-blue-600 hover:underline">12. Contact Us</a></li>
                </ul>
            </div>

            <!-- Privacy Sections -->
            <section id="information-we-collect" class="mb-8">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">1. Information We Collect</h2>
                
                <h3 class="text-lg font-semibold mb-3">Account Information</h3>
                <ul class="list-disc pl-6 mb-4">
                    <li>Name and email address</li>
                    <li>Username and encrypted password</li>
                    <li>Profile information (optional)</li>
                    <li>Subscription and billing details</li>
                </ul>

                <h3 class="text-lg font-semibold mb-3">AI Interaction Data</h3>
                <ul class="list-disc pl-6 mb-4">
                    <li>Conversation messages and responses</li>
                    <li>Agent preferences and settings</li>
                    <li>Usage patterns and session data</li>
                    <li>Feedback and ratings</li>
                </ul>

                <h3 class="text-lg font-semibold mb-3">Technical Information</h3>
                <ul class="list-disc pl-6 mb-4">
                    <li>IP address and location data</li>
                    <li>Device type and browser information</li>
                    <li>Platform usage analytics</li>
                    <li>Performance and error logs</li>
                </ul>

                <h3 class="text-lg font-semibold mb-3">Optional Information</h3>
                <ul class="list-disc pl-6 mb-4">
                    <li>Portfolio content and projects</li>
                    <li>Web development requirements</li>
                    <li>Support ticket communications</li>
                    <li>Survey responses and feedback</li>
                </ul>
            </section>

            <section id="how-we-use" class="mb-8">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">2. How We Use Your Information</h2>
                
                <h3 class="text-lg font-semibold mb-3">Service Provision</h3>
                <ul class="list-disc pl-6 mb-4">
                    <li>Provide AI agent interactions and responses</li>
                    <li>Maintain your account and preferences</li>
                    <li>Process payments and subscriptions</li>
                    <li>Deliver web development services</li>
                </ul>

                <h3 class="text-lg font-semibold mb-3">Service Improvement</h3>
                <ul class="list-disc pl-6 mb-4">
                    <li>Analyze usage patterns to enhance user experience</li>
                    <li>Train and improve AI models (anonymized data)</li>
                    <li>Develop new features and capabilities</li>
                    <li>Optimize platform performance</li>
                </ul>

                <h3 class="text-lg font-semibold mb-3">Communication</h3>
                <ul class="list-disc pl-6 mb-4">
                    <li>Send account-related notifications</li>
                    <li>Provide customer support</li>
                    <li>Share platform updates and news (with consent)</li>
                    <li>Respond to inquiries and feedback</li>
                </ul>

                <h3 class="text-lg font-semibold mb-3">Legal and Security</h3>
                <ul class="list-disc pl-6 mb-4">
                    <li>Comply with legal obligations</li>
                    <li>Prevent fraud and abuse</li>
                    <li>Enforce our terms of service</li>
                    <li>Protect user and platform security</li>
                </ul>
            </section>

            <section id="ai-data" class="mb-8">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">3. AI Conversation Data</h2>
                
                <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-4">
                    <p class="text-blue-800">
                        <strong>Special Protection:</strong> Your AI conversations receive enhanced privacy protection due to their personal nature.
                    </p>
                </div>

                <h3 class="text-lg font-semibold mb-3">How We Handle Conversations</h3>
                <ul class="list-disc pl-6 mb-4">
                    <li><strong>Encryption:</strong> All conversations are encrypted in transit and at rest</li>
                    <li><strong>Access Control:</strong> Only you and authorized system processes can access your conversations</li>
                    <li><strong>Retention:</strong> Conversations are kept only as long as necessary for service provision</li>
                    <li><strong>Anonymization:</strong> Data used for AI improvement is anonymized and aggregated</li>
                </ul>

                <h3 class="text-lg font-semibold mb-3">Conversation Analysis</h3>
                <p class="mb-4">
                    We may analyze conversation patterns (not content) to:
                </p>
                <ul class="list-disc pl-6 mb-4">
                    <li>Improve AI response quality and relevance</li>
                    <li>Detect and prevent abuse or harmful content</li>
                    <li>Optimize system performance and response times</li>
                    <li>Develop new agent personalities and capabilities</li>
                </ul>

                <h3 class="text-lg font-semibold mb-3">Your Control</h3>
                <ul class="list-disc pl-6 mb-4">
                    <li>You can delete individual conversations or entire chat history</li>
                    <li>You can opt out of conversation analysis for service improvement</li>
                    <li>You can export your conversation data at any time</li>
                    <li>You can set automatic deletion periods for old conversations</li>
                </ul>
            </section>

            <section id="sharing" class="mb-8">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">4. Information Sharing</h2>
                
                <div class="bg-red-50 border-l-4 border-red-500 p-4 mb-4">
                    <p class="text-red-800">
                        <strong>We Never Sell Your Data:</strong> We do not sell, rent, or trade your personal information to third parties for commercial purposes.
                    </p>
                </div>

                <h3 class="text-lg font-semibold mb-3">When We Share Information</h3>
                <ul class="list-disc pl-6 mb-4">
                    <li><strong>Service Providers:</strong> Trusted partners who help us operate the platform (hosting, payment processing, analytics)</li>
                    <li><strong>Legal Requirements:</strong> When required by law, court order, or legal process</li>
                    <li><strong>Safety:</strong> To protect users, our platform, or public safety</li>
                    <li><strong>Business Transfer:</strong> In case of merger, acquisition, or asset sale (with notice)</li>
                </ul>

                <h3 class="text-lg font-semibold mb-3">Third-Party Services</h3>
                <p class="mb-4">We use the following types of third-party services:</p>
                <ul class="list-disc pl-6 mb-4">
                    <li><strong>Cloud Infrastructure:</strong> Secure hosting and data storage</li>
                    <li><strong>Payment Processing:</strong> Stripe, PayPal for secure transactions</li>
                    <li><strong>Analytics:</strong> Anonymized usage analytics (Google Analytics, etc.)</li>
                    <li><strong>Communication:</strong> Email delivery and customer support tools</li>
                </ul>
            </section>

            <section id="data-security" class="mb-8">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">5. Data Security</h2>
                
                <h3 class="text-lg font-semibold mb-3">Technical Safeguards</h3>
                <ul class="list-disc pl-6 mb-4">
                    <li><strong>Encryption:</strong> AES-256 encryption for data at rest, TLS 1.3 for data in transit</li>
                    <li><strong>Access Control:</strong> Multi-factor authentication and role-based access</li>
                    <li><strong>Network Security:</strong> Firewalls, intrusion detection, and monitoring</li>
                    <li><strong>Regular Testing:</strong> Security audits and penetration testing</li>
                </ul>

                <h3 class="text-lg font-semibold mb-3">Operational Security</h3>
                <ul class="list-disc pl-6 mb-4">
                    <li>Employee background checks and security training</li>
                    <li>Limited access on a need-to-know basis</li>
                    <li>Regular security updates and patches</li>
                    <li>Incident response and breach notification procedures</li>
                </ul>

                <h3 class="text-lg font-semibold mb-3">Your Security</h3>
                <p class="mb-4">Help us protect your account by:</p>
                <ul class="list-disc pl-6 mb-4">
                    <li>Using a strong, unique password</li>
                    <li>Enabling two-factor authentication</li>
                    <li>Keeping your login credentials confidential</li>
                    <li>Logging out when using shared devices</li>
                </ul>
            </section>

            <section id="retention" class="mb-8">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">6. Data Retention</h2>
                
                <h3 class="text-lg font-semibold mb-3">Retention Periods</h3>
                <ul class="list-disc pl-6 mb-4">
                    <li><strong>Account Data:</strong> Kept while your account is active plus 90 days</li>
                    <li><strong>Conversation History:</strong> Kept for up to 2 years or until you delete it</li>
                    <li><strong>Payment Records:</strong> Kept for 7 years for tax and legal compliance</li>
                    <li><strong>Analytics Data:</strong> Anonymized data kept for up to 3 years</li>
                </ul>

                <h3 class="text-lg font-semibold mb-3">Automatic Deletion</h3>
                <p class="mb-4">
                    You can set automatic deletion preferences for:
                </p>
                <ul class="list-disc pl-6 mb-4">
                    <li>Conversations older than 30, 90, or 365 days</li>
                    <li>Inactive session data</li>
                    <li>Temporary files and cache data</li>
                    <li>Old activity logs</li>
                </ul>
            </section>

            <section id="your-rights" class="mb-8">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">7. Your Privacy Rights</h2>
                
                <h3 class="text-lg font-semibold mb-3">Universal Rights</h3>
                <ul class="list-disc pl-6 mb-4">
                    <li><strong>Access:</strong> Request a copy of your personal data</li>
                    <li><strong>Correction:</strong> Update or correct inaccurate information</li>
                    <li><strong>Deletion:</strong> Request deletion of your personal data</li>
                    <li><strong>Portability:</strong> Export your data in a common format</li>
                </ul>

                <h3 class="text-lg font-semibold mb-3">Additional Rights (GDPR, CCPA)</h3>
                <ul class="list-disc pl-6 mb-4">
                    <li><strong>Opt-out:</strong> Opt out of data processing for marketing</li>
                    <li><strong>Restriction:</strong> Limit how we process your data</li>
                    <li><strong>Objection:</strong> Object to certain types of processing</li>
                    <li><strong>Non-discrimination:</strong> Equal service regardless of privacy choices</li>
                </ul>

                <h3 class="text-lg font-semibold mb-3">Exercising Your Rights</h3>
                <p class="mb-4">To exercise your privacy rights:</p>
                <ul class="list-disc pl-6 mb-4">
                    <li>Use the privacy controls in your account settings</li>
                    <li>Contact us at privacy@aiportfolio.com</li>
                    <li>Submit a request through our privacy portal</li>
                    <li>We will respond within 30 days</li>
                </ul>
            </section>

            <section id="cookies" class="mb-8">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">8. Cookies and Tracking</h2>
                
                <h3 class="text-lg font-semibold mb-3">Types of Cookies We Use</h3>
                <ul class="list-disc pl-6 mb-4">
                    <li><strong>Essential Cookies:</strong> Required for basic platform functionality</li>
                    <li><strong>Analytics Cookies:</strong> Help us understand how you use the platform</li>
                    <li><strong>Preference Cookies:</strong> Remember your settings and preferences</li>
                    <li><strong>Marketing Cookies:</strong> Deliver relevant ads and content (with consent)</li>
                </ul>

                <h3 class="text-lg font-semibold mb-3">Cookie Management</h3>
                <p class="mb-4">You can control cookies through:</p>
                <ul class="list-disc pl-6 mb-4">
                    <li>Our cookie consent banner and preference center</li>
                    <li>Your browser's privacy settings</li>
                    <li>Third-party opt-out tools</li>
                    <li>Account privacy settings</li>
                </ul>

                <p class="mb-4">
                    <a href="{{ url_for('legal.cookies') }}" class="text-blue-600 hover:underline">Manage Cookie Preferences</a>
                </p>
            </section>

            <section id="international" class="mb-8">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">9. International Data Transfers</h2>
                <p class="mb-4">
                    Our platform may transfer your data internationally to provide our services. We ensure adequate protection through:
                </p>
                <ul class="list-disc pl-6 mb-4">
                    <li>Standard Contractual Clauses (SCCs) approved by the EU Commission</li>
                    <li>Adequacy decisions for data transfers to approved countries</li>
                    <li>Additional safeguards like encryption and access controls</li>
                    <li>Regular reviews of data transfer security</li>
                </ul>
            </section>

            <section id="children" class="mb-8">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">10. Children's Privacy</h2>
                <p class="mb-4">
                    Our platform is not directed at children under 13 years of age. We do not knowingly collect personal information from children under 13.
                </p>
                <p class="mb-4">
                    If you are a parent or guardian and believe your child has provided us with personal information, please contact us immediately so we can delete such information.
                </p>
            </section>

            <section id="changes" class="mb-8">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">11. Policy Changes</h2>
                <p class="mb-4">
                    We may update this Privacy Policy periodically to reflect changes in our practices or legal requirements. We will:
                </p>
                <ul class="list-disc pl-6 mb-4">
                    <li>Post the updated policy on our website</li>
                    <li>Notify you via email for significant changes</li>
                    <li>Provide 30 days' notice for material changes</li>
                    <li>Update the "Last Modified" date at the top</li>
                </ul>
            </section>

            <section id="contact" class="mb-8">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">12. Contact Us</h2>
                <p class="mb-4">
                    If you have questions about this Privacy Policy or our privacy practices:
                </p>
                <div class="bg-gray-50 p-4 rounded-lg mb-4">
                    <p><strong>Privacy Team:</strong> privacy@aiportfolio.com</p>
                    <p><strong>Data Protection Officer:</strong> dpo@aiportfolio.com</p>
                    <p><strong>Address:</strong> [Your Business Address]</p>
                    <p><strong>Phone:</strong> [Your Phone Number]</p>
                </div>

                <p class="mb-4">
                    <a href="{{ url_for('contact.support') }}" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 inline-block">Contact Privacy Team</a>
                </p>
            </section>

            <!-- Data Request Section -->
            <div class="bg-green-50 border-l-4 border-green-500 p-6 mt-8">
                <h3 class="text-lg font-bold mb-2 text-green-800">Quick Data Requests</h3>
                <div class="space-y-2">
                    <a href="#" onclick="requestDataExport()" class="text-green-700 hover:underline block">📥 Download My Data</a>
                    <a href="#" onclick="requestDataDeletion()" class="text-green-700 hover:underline block">🗑️ Delete My Account</a>
                    <a href="{{ url_for('legal.cookies') }}" class="text-green-700 hover:underline block">🍪 Manage Cookies</a>
                    <a href="{{ url_for('contact.support') }}" class="text-green-700 hover:underline block">📧 Privacy Questions</a>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function requestDataExport() {
    if (confirm('Would you like to request an export of all your data? This may take up to 30 days to process.')) {
        fetch('/api/privacy/data-export', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': '{{ csrf_token() }}'
            }
        }).then(response => {
            if (response.ok) {
                alert('Data export requested successfully. You will receive an email when your data is ready for download.');
            } else {
                alert('Error requesting data export. Please contact support.');
            }
        });
    }
}

function requestDataDeletion() {
    if (confirm('Are you sure you want to delete your account? This action cannot be undone and will permanently delete all your data including conversations, projects, and settings.')) {
        window.location.href = '/account/delete-confirmation';
    }
}
</script>

<style>
.privacy-page .prose h2 {
    color: #1f2937;
    border-bottom: 2px solid #e5e7eb;
    padding-bottom: 0.5rem;
    margin-bottom: 1rem;
}

.privacy-page .prose h3 {
    color: #374151;
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
}

.privacy-page .prose a {
    color: #2563eb;
    text-decoration: none;
}

.privacy-page .prose a:hover {
    text-decoration: underline;
}
</style>
{% endblock %}